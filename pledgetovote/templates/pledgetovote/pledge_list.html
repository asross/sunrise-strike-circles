{% extends 'pledgetovote/base_template.html' %}
{% load static %}
{% load sass_tags %}

{% block subtitle %}Pledges{% endblock %}

{% block extra_css %}
<link rel="stylesheet" type="text/css" href="{% sass_src 'pledgetovote/sass/pledge_list.sass' %}">
{% endblock %}

{% block content %}

<div class="title">Pledges</div>
<section class="section" id="pledge-list-header">
  <div class="columns is-centered">
    <div class="column is-offset-1 is-2"><div class="subtitle is-4">Name</div></div>
    <div class="column is-2"><div class="subtitle is-4">Email</div></div>
    <div class="column is-2"><div class="subtitle is-4">Phone</div></div>
    <div class="column is-2"><div class="subtitle is-4">Signup Location</div></div>
    <div class="column is-3"><div class="subtitle is-4">Address</div></div>
  </div>
  <hr class="hr">
</section>

<section class="section" id="pledge-list">
{% for pledge in pledge_list %}
  <div class="columns is-vcentered" data-link="{% url 'pledgetovote:pledge_edit' pledge.id %}">
      <div class="column is-1">
        <a href="{% url 'pledgetovote:pledge_edit' pledge.id %}">
          <figure class="image">
            <img src="{{ pledge.picture.url }}" alt="{{ pledge.first_name }} {{ pledge.last_name }}'s picture">
          </figure>
        </a>
      </div>
    <div class="column is-2">
      <a href="{% url 'pledgetovote:pledge_edit' pledge.id %}">
        {{ pledge.first_name }} {{ pledge.last_name }}
      </a>
    </div>
    <div class="column is-2">{{ pledge.email }}</div>
    <div class="column is-2">{{ pledge.phone }}</div>
    <div class="column is-2">{{ pledge.location }}</div>
    <div class="column is-4">{{ pledge.address }}</div>
  </div>
{% empty %}
  <div class="columns">
    <div class="column is-half">
      <div class="box" id="no-pledges">
        <span class="icon">
          <i class="fas fa-exclamation-circle has-text-black" aria-hidden="true"></i>
        </span>
        There aren't any pledges yet
      </div>
    </div>
  </div>
{% endfor %}
</section>

{% if is_paginated %}
<div class="pagination">
  <span class="step-links">
    {% if page_obj.has_previous %}
      <a href="?page=1">&laquo; first</a>
      <a href="?page={{ page_obj.previous_page_number }}">previous</a>
    {% endif %}

    <span class="current">
      Page {{ page_obj.number }} of {{ paginator.num_pages }}.
    </span>

    {% if pledges.has_next %}
      <a href="?page={{ page_obj.next_page_number }}">next</a>
      <a href="?page={{ paginator.num_pages }}">last &raquo;</a>
    {% endif %}
  </span>
</div>
{% endif %}

{% endblock %}

{% block extra_javascript %}
<script type="text/javascript" src="{% static 'pledgetovote/js/pledge_list.js' %}"></script>
{% endblock %}
